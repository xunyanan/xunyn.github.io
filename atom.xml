<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[寻亚楠的博客]]></title>
  <link href="http://xunyanan.com/atom.xml" rel="self"/>
  <link href="http://xunyanan.com/"/>
  <updated>2016-03-10T15:44:27+08:00</updated>
  <id>http://xunyanan.com/</id>
  <author>
    <name><![CDATA[寻亚楠]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[test]]></title>
    <link href="http://xunyanan.com/blog/2016/03/10/test/"/>
    <updated>2016-03-10T15:44:00+08:00</updated>
    <id>http://xunyanan.com/blog/2016/03/10/test</id>
    <content type="html"><![CDATA[<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2016/03/10/test/'>http://xunyanan.com/blog/2016/03/10/test/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[太白山之行]]></title>
    <link href="http://xunyanan.com/blog/2014/04/29/tai-bai-shan-zhi-xing/"/>
    <updated>2014-04-29T22:49:00+08:00</updated>
    <id>http://xunyanan.com/blog/2014/04/29/tai-bai-shan-zhi-xing</id>
    <content type="html"><![CDATA[<h2>太白山</h2>

<p>4月第四周的周末，跟公司的小伙伴一起去了<a href="http://baike.baidu.com/view/2156.htm?fr=wordsearch">太白山</a>。太白山位于宝鸡眉县，从山脚下到山顶，有低山、中山、高山三种不同的植被风景。海拔3511（天圆地方），好多台阶，爬的人腿疼；山里有瀑布，有积雪，从山顶远眺，白皑皑的一片；有道家的修行场所，路上还偶遇同龄的道士。总的来说，风景秀美的程度超过了预期，是蛮值得去的一个景点。</p>

<h2>两件小事</h2>

<p>行程中，发生了两件事。在太白山脚下的<a href="http://baike.baidu.com/subview/1071930/9210654.htm?fromId=1071930&amp;from=rdtself&amp;fr=wordsearch">汤峪镇</a>，时间大概是去到汤峪的当天中午，我们一行人在镇上逛完，看了一个小瀑布，准备回宾馆，要走过一座很窄的吊桥。Team里的一部分人，先过去了，发现当地的一个老大爷，非要收每人1块钱的过路费，当时我还在瀑布那里拍照，走过去之后，觉得也就十来块钱，要么就给他了。从那里过桥，对面就是龙凤宾馆，否则要绕回去，过一座大桥，要多走个二十分钟才能回去。Team里的人，有些很生气，准备去宁愿绕行，也不给这个钱。当时自己也有点累，一心想赶快回宾馆，随后，想说服大家一起走桥吧，毕竟没几个钱，但多数人不赞同，准备绕路，自己觉得好想完全没必要绕路，便和另一个姑娘一起花钱过了桥，没有和组织行动保持一致。这是件非常小的事，但无独有偶。第二天又发生了一件事。在辛苦爬到太白山山顶，后坐索道下来，一行人和导游一起排队等下山的服务车，当时组织者和他女朋友，因为体力先下山了，我们一行还剩16个人，服务车是20座的。等待了10分钟左右，来了一辆空车，但这是后面的一些散客，便抢先上了这辆车。导游发现后，想请工作人员来制止，太白上的工作人员并没有搭理，我们也只能先上车。在车上先招呼大家都坐下来，发现还差两个座位，开始想的是，我和导游站着就坚持到山下。谁知可能是山路的原因，司机师傅意思多余的人必须下车，然后和导游又找工作人员理论了一番，工作人员始终不作为，这时情况很尴尬，想想算了，不行就去坐下一班，到山脚下再和Team的人汇合。下车又是和工作人员理论一会，自己也有了些情绪，因为既然排队是先到先走，工作人员是应该制止这样的插队行为，但当时环境嘈杂，也没理论出什么结果。这时候Team里坐上车的人全部下来了，然后跟我说：“we&rsquo;re a team”,那一刻，真的好感动。最后是我们大家一起又排到了一辆车，然后一块上了车。<br/>
下山的路上，望着蜿蜒山路的风景，想来大家宁愿牺牲，也要维护Team和照顾Team里每个人的感受，真是很感动，也深刻的教育了我。</p>

<h2>处理</h2>

<p>其实第二件事，在当时的场景还有很多处理的方法，比较直接的就是去找已经坐在车上的“散客”，说明自己的情况，看他们是否愿意去重新排队。当时，在工作人员不作为时，有写慌乱，坐在车上的一对年龄稍大的夫妇，真是让人感觉“坏人变老了”，他们用表情和话语，表明的是他们一定要坐这辆车，因为他们已经坐下了。。。完全不考虑旁人。最后选择了，妥协的方法，其实对于这样的人，对于他们的忍让，就是对社会的不作为，不彰显的“正义”，就是罪恶。
两件事有不同的背景，而每一次个人的选择，在第一件事的选择上，想在想来，Teammate当时肯定在与老头协商时，出现了一些不愉快的场面，而自己当时没有去多了解这个背景，没有坚定的选择相信队友。第二件事，除了处理上的效果不好外，对于当时，规则的维护者不作为时，一定要拿出勇气，直面那些打破规则占到好人便宜的坏人，只有这样做，才能使社会契约继续维持，否则会出现，所有人都在变坏，规则的遵守者，变成了傻蛋，似乎有点像当今社会的某些写照。</p>

<h2>太白上美景</h2>

<p>发福利。
<img src="http://xunyanan.com/images/blog/smallWaterfall.jpg" alt="smallWaterfall" /></p>

<!--more-->


<p><img src="http://xunyanan.com/images/blog/waterfall.jpg" alt="waterfall" />
<img src="http://xunyanan.com/images/blog/chineseInk.jpg" alt="chineseInk" /> <br/>
<img src="http://xunyanan.com/images/blog/snowMoutain.jpg" alt="snowMoutain" /> <br/>
<img src="http://xunyanan.com/images/blog/roads.jpg" alt="roads" /> <br/>
<img src="http://xunyanan.com/images/blog/shoes.jpg" alt="shoes" /></p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2014/04/29/tai-bai-shan-zhi-xing/'>http://xunyanan.com/blog/2014/04/29/tai-bai-shan-zhi-xing/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How do iBeacons work]]></title>
    <link href="http://xunyanan.com/blog/2014/03/27/how-do-ibeacons-work/"/>
    <updated>2014-03-27T20:15:00+08:00</updated>
    <id>http://xunyanan.com/blog/2014/03/27/how-do-ibeacons-work</id>
    <content type="html"><![CDATA[<p><a href="http://www.warski.org/blog/2014/01/how-ibeacons-work/">原文地址</a></p>

<h2>iBeacons</h2>

<p>iBeacons最近是一个趋势的话题，它们允许室内定位，让你的电话知道你在基站的范围。这个能有许多应用：在停车场帮你找到你的车，零售商通过优惠券和基于位置的特别优惠，以至许多现在不敢想象的应用。<br/>
<img src="http://xunyanan.com/images/blog/iStock_000019319211Large-300x187.jpg" alt="iBeacons" />
关于iBeacons和如何使用它有许多博文，但从技术角度，他们如何工作，深层的技术是低功耗蓝牙，等等。。。</p>

<h2>什么是低功耗蓝牙</h2>

<p><a href="http://en.wikipedia.org/wiki/Bluetooth_low_energy">低功耗蓝牙</a>是发布在2010年的蓝牙4.0规范的一部分，它在Nokia发起于2006年，但合并到蓝牙技术，它是同经典蓝牙不同的一组协议，并且设备不向后兼容。因此有会遇到三种设备
<em>蓝牙：仅支持经典模式
</em>智能蓝牙过渡(Bluetooth Smart Ready):支持经典模式和LE(Low Energy)模式
*智能蓝牙：仅支持LE模式<br/>
<img src="http://xunyanan.com/images/blog/LogoBluetoothSmartReady-300x130.jpg" alt="Bluetooth Smart Ready" />
</br><br/>
新的智能手机（iPhone 4S+,SG3+）,笔记本，平板电脑，装备了蓝牙4.0，因为已经是智能蓝牙过渡，Beacons，从另一方面讲，仅支持低功耗协议(允许他们在一块电池的情景下，工作足够长的时间)，因此他们实现了智能蓝牙，旧的设备，如外设、车载系统、旧手机通常仅支持经典蓝牙协议。<br/>
低功耗蓝牙主要关注点，理所当然在低功耗上。例如一些Beacons在一块纽扣电池下（电池通常不更换，除非当beacon停止工作时，才需要更换）可以持续两年传输信号。低功耗蓝牙同经典蓝牙都使用相同的频谱范围（2.4GHZ&mdash;2.4835GHZ）。低功耗蓝牙有更低的传输速率，尽管它的本意不是流传输大量数据，而是发现和简单通讯。在理论范围，低功耗蓝牙和经典蓝牙信号都可以最远达到100米。</p>

<h2>低功耗蓝牙如何通讯</h2>

<p>低功耗蓝牙有两种主状态:广播和连接。  <br/>
广播是单向的被发现机制，想要被发现的设备可以传输数据包每20ms到10秒。越短的时间间隔，越短的电池寿命，但设备发现速度越快。数据包可以加长至47个长度的字节，由以下构成:  <br/>
* 1字节报头<br/>
* 4字节访问地址<br/>
* 2-39字节广播频道PDU<br/>
* 3字节CRC  <br/>
<img src="http://xunyanan.com/images/blog/bluetooth-le-packet-300x121.png" alt="data" /></p>

<!--more-->


<p>广播通讯频道，访问地址总是0x8E89BED6.对于数据频道，每一次连接都不相同。<br/>
PDU有它自己的头部（两字节：负载的大小和它的类型&mdash;设备是否支持连接，等）和实际的数据负载（最长至37字节）。<br/>
最后，负载的头六个字节是设备的MAC地址，实际的数据最长有31字节。<br/>
低功耗蓝牙可以操作一个非连接广播模式（所有的信息都被包含在广播中），但他们也可以允许连接（通常允许）。<br/>
设备被发现之后，可以建立一个连接。它是有可能去读低功耗蓝牙提供的服务，对于每一个服务特性（这个是被熟知的GATT配置文件的实现）。每一个特性提供一些可以被读取或被写的值。例如一个智能调温器可以暴露服务为获得当前温度、湿度读取（作为特性服务），另一个服务特性去设置期望的温度。尽管，beacons没有使用连接，这里跳过了细节。如果你想要读更多的低功耗蓝牙连接，<a href="https://developer.apple.com/library/ios/documentation/NetworkingInternetWeb/Conceptual/CoreBluetooth_concepts/AboutCoreBluetooth/Introduction.html#//apple_ref/doc/uid/TP40013257-CH1-SW1">苹果核心蓝牙指导书</a>,即使你不是一名iOS开发人员，也能提供了一个好的概述。更专业的技术文章，请看<a href="http://www.eetimes.com/document.asp?doc_id=1280724">EE</a>.</p>

<h2>beacons如何使用蓝牙？</h2>

<p>Beacons通常使用广播频道，由beacon望文生义，他们每隔一段时间传输数据包，这些数据被设备像智能机接受，因此iBeacons是简单的低功耗蓝牙广播的特殊应用，iOS端加入了特别的支持。<br/>
一国你尝试拦截一个蓝牙广播包，例如来自于Estimote beacon，你将看到下列数据：<br/>
<code>
02 01 06 1A FF 4C 00 02 15 B9 40 7F 30 F5 F8 46 6E AF F9 25 55 6B 57 FE 6D 00 49 00
</code><br/>
(捕获这些数据，如果使用OSX，一个附加的<a href="http://stackoverflow.com/questions/5863088/bluetooth-sniffer-preferably-mac-osx">下载</a>包含一个蓝牙扫描和包日志)<br/>
以上数据已经有报文了，固定访问地址、广播PDU头和MAC地址被移除;它只有广播数据&mdash;30字节，因此它适应了31字节的限制。<br/>
什么使得蓝牙广播成为iBeacon？格式由苹果规定，分解如下：<br/>
<code>
02 01 06 1A FF 4C 00 02 15: iBeacon prefix (fixed)
B9 40 7F 30 F5 F8 46 6E AF F9 25 55 6B 57 FE 6D: proximity UUID (here: Estimote’s fixed UUID)
00 49: major
00 0A: minor
C5: 2’s complement of measured TX power
</code><br/>
<img src="http://xunyanan.com/images/blog/bluetooth-le-ibeacon-packet-300x144.png" alt="data" /><br/>
如果你想用beacons试验，不需要任何特别的设备，遵循一下步骤：如果你有一台新手机（例如iPhone4s + SG3+）或者蓝牙4.0的笔记本（Retina Macbook），你可以转化以上设备成为iBeacon的发送和接受端，对于iPhone，参考“Locate iB”app在苹果应用商店，对于MacOS，<a href="http://stackoverflow.com/questions/19410398/turn-macbook-into-ibeacon">参考这里</a>,当然，也可以用<a href="http://developer.radiusnetworks.com/2013/10/09/how-to-make-an-ibeacon-out-of-a-raspberry-pi.html">电路板</a>当beacon。</p>

<h2>分解iBeacon数据格式</h2>

<p>从固定的iBeacon前缀(02 01 &hellip;.15),其他的部分的意义是什么呢？<br/>
近距离UUID(B9 &hellip; 6D 在我们的例子中)，是被用来区分你的beacons和其他的标识符，如果，例如beacons被用来去提供特别优惠给顾客在连锁店。所有的beacons属于一个链，应该有相同的近距离UUID，专用的为连锁店的iPhone应用，会在后台扫描给定UUID的beacons。<br/>
主编号(2字节，这里是:0x0049 (10进制73))，被用来为相关的许多beacons组团，例如在店里的所有的beacons将有相同的主标号，这样应用将知道顾客在哪个特定的商店。<br/>
次标号(2字节，这里是:0X000A,(10进制10))被用来定义独立的beacons，每一个beacon在店里将有不同的此标号，因此你知道顾客实际在哪里。</p>

<h2>测量距离</h2>

<p>数据最后，TX power,被用来判断离beacon的距离。这些可以被表达做为粗糙的信息（近/远/超出范围）或者作为一个以米更精确的度量(可以转换为英尺);这是如何完成的？<br/>
TX power(这里是：OxC5=197，2‘s complement = 256-197 =-59dBm)是被测量的信号强度，在距设备一米(RSSI-接受信号强度指示)，作为信号衰减预期，更进一步的讲，知道一米的RSSI，并且知道当前的RSSI(我们同接受信号一起得到信息)，它有可能有计算差别，iOS已经建立了模型，对于其他平台，需要手写代码，<a href="http://stackoverflow.com/questions/20416218/understanding-ibeacon-distancing">参看这里</a><br/>
障碍物例如家具，人或者通讯拥堵都可以降低信号，因此距离是一个估算值。</p>

<h2>iOS 整合</h2>

<p>iOS同iBeacons带来了一些附加的整合，你的app可以接受通知，当一个beacon出现在一个区域&mdash;不仅是app在前台运行，后台运行也可以。一个app可以订阅区域的进入/离开时间，然后它可以部分的唤醒，甚至它还未在工作，为了响应这些事件，app可以发送本地通知，提示用户打开app，看店内提示(可以从网络取数据)，或者相关内容。  <br/>
更准确的，当手机不活跃时，iOS进入低功耗监控模式：仅有iBacons区域进入和退出是被检测的。当手机和app是活跃的，你可以进入搜寻模式，可以打开你去家册信号强度和更精确估算距离。<br/>
注意你的手机需要花费时间去检测beacon，首先beacons传输广播是间断的，其次你的手机不是活跃的，它也是隔一段时间检测蓝牙信号，对于被检测的beacon，这两种间隔必须重合，实际上，它可能花费15分钟去检测一个beacon。
对于一步一步写一个iOS iBeacons的应用，<a href="http://www.cocoanetics.com/2013/11/can-you-smell-the-ibeacon/">参考这里</a>,Beacons制造商也提供专用的SDK，去帮助编写基于beacon的引用，看一下例子<a href="https://github.com/Estimote/iOS-SDK">Esitmote&rsquo;s iOS SDK</a>and<a href="https://github.com/Estimote/Android-SDK">Android</a></p>

<h2>下一步</h2>

<p>现在唯一的剩下去做的事是开发一些基于beacon的引用。</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2014/03/27/how-do-ibeacons-work/'>http://xunyanan.com/blog/2014/03/27/how-do-ibeacons-work/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[程序员买房笔记]]></title>
    <link href="http://xunyanan.com/blog/2014/02/14/cheng-xu-yuan-mai-fang-bi-ji/"/>
    <updated>2014-02-14T21:40:00+08:00</updated>
    <id>http://xunyanan.com/blog/2014/02/14/cheng-xu-yuan-mai-fang-bi-ji</id>
    <content type="html"><![CDATA[<p>如今工作个几年，买房就是事了，特别是当下“房事”汹涌。有诗云：</br></p>

<p>屌丝编程三五载，啃老攒钱凑首付。</br>
一入房贷深似海，从此小资是路人。</br></p>

<p>这首打油诗，写出了打酱油的感觉。买房的第一步便是看房，可以自己跑售楼部，可以去<a href="http://xian.soufun.com">搜房网</a>，还可以跟个看房团（一日看遍长安盘），渐渐地看房也成了体力活，最后发现没有没有缺点的房子，因为完美的房子，价钱就是缺点。</p>

<h2>房子做为一个商品，像开发商介绍的那样，有几个关键的属性：</h2>

<h3>区域位置</h3>

<p>北京的房子一平卖3-4W，小县城的房子卖2-4K，是位置不同的价格差异，开发商一般用沙盘，来展现项目的位置，搞笑的是开发商，把自己项目的超大的放到沙盘中间，然后其他的建筑还用原来比例，自然离它都近了。</p>

<h3>小区环境</h3>

<p>位置定下来后，便是小区，现在的开发商，多是开发一整个楼盘，小区的配套、规划也很重要，开发商一般用楼板模型，来介绍它的规划。</p>

<h3>房屋</h3>

<p>最后就是买的那套小屋了，用户型图可以看到各个房间的布局，结合在楼体的位置，就有朝向、采光的情况。</p>

<h2>房屋现在是个“大宗商品”</h2>

<p>而影响这个商品价值的因素很多，这使得买房是件复杂的事，解决这个问题不同人有不同的方法：</p>

<h3>1.依靠经验</h3>

<p>一般父母辈年龄的人办事，会比较依靠经验，这和成长环境和信息传递方式有关系，会觉得同学、同事有买过的楼盘，会提供现成的经验来参考，能预先了解情况，降低风险。</p>

<h3>2.未来趋势判断</h3>

<p>把房屋作为一种投资手段，会更看重房屋的升值潜力，去寻找“价值洼地”，较少关心其他属性。</p>

<h3>3.分析模型</h3>

<p>这是科学理性的一种方法，例如比较不同楼盘的区域位置交通，分别分析公交线路、地铁站距离等，小区的比较，会细化到<a href="http://baike.baidu.com/link?url=b31E3TRfSM0wwEHcJPiVTBVpJ2okZEfKfBexPZkhaDY9u5phxjvsjG9WlkxEBFEC">容积率</a>，<a href="http://baike.baidu.com/view/77999.htm">绿化率</a>等一些指标，这些工作是要买房的人，要做的功课，否则会被售楼小姐忽悠晕的。模型法是最接近事实的方法，存在的问题是有很难量化的比较，例如交通的便利与居住环境的幽静，两者要选其中一个时，如何更好的选择。</p>

<h3>4.依靠直觉</h3>

<p>这是个看似不靠谱，确被默默使用，比如售楼小姐要穿职业正装，长得再漂亮点，便会人更愿意了解项目的信息，销售过程中专业又热心，会让人增加对这套房子的好感。比如进入有的样板间，进去后很舒服，让人愿意多待，其背后除了装修设计，一般房屋的采光不会差，其次房间布局会合理。有些直觉性的结论，往往有内在的理性道理，从居住心情的角度，买套钟意的房子也很重要。</p>

<h3>5.价值偏好</h3>

<p>虽然像房屋这种高价值的商品，人们总是尽量的保持理性，但偏好依然存在，比如恒大的队的球迷，会对恒大品牌的认知度高，置业时，可能考虑先看恒大的楼盘，它的合理性在于，有品牌的开发商，比小开发商更注重品牌价值，内部管理会更规范，房子出现问题的概率低。</p>

<!--more-->


<h2>回顾购房过程</h2>

<p>开始是各方面了解信息，从网上、售楼部、朋友了解房子，接着是建立自己的分析模型，从自己情况入手，在一个<a href="http://baike.baidu.com/view/2155.htm">三线城市</a>，一个工资一两平房子，然后确定如总价、地铁沿线、上班附近、交房时间这些关键点。从在售楼盘中选出候选楼盘，在候选楼盘中根据直觉和偏好做出选择。这里也从<a href="http://baike.baidu.com/view/31551.htm">经济学</a>角度，给出一些观点:</p>

<h3><a href="http://baike.baidu.com/view/342791.htm">有效市场假说</a></h3>

<p>这是从证券市场中的<a href="http://baike.baidu.com/view/3606415.htm">随机游走</a>,进一步发展来，有一个飞镖买股票的小故事，是说1967年6月，美国的《富比士》杂志一时心血来潮，投资28,000美元买了28家上市公司的股票（每家买1,000美元）。他们并未分析各上市公司的本益比，也没有请教什么股票经纪人，而是将《纽约时报》的股票版钉在墙壁上，用掷飞镖的方式乱射，“射中”哪家公司，该公司就买1,000元股票。结果在17年后，这2万8千元的股票增值为131,697七元，获利470％，换算成利息的话，平均每年有9.5％的复利。其背后的理论就是市场上的价格总在真实的反映人们交换的意愿，虽然房屋市场交换不如证券市场频繁，且受价格锚定影响更大，但从侧面告诉我们，销售人员口中的“升值潜力巨大”，基本不可信，如地铁一通，房子马上升值，实际是这一消息，如果在拍卖土地时，开发商们知道，这块地的便会溢价，如果是买完地，后获得的地铁消息，那么开发商会调高定价，这样企业才能赚更多的钱，然后在根据购房人用脚投票的情况，决定继续搞优惠和调整价格。市场上都是精明的人，没有傻子，买完房子，十来天后一套房子涨了十来万，那多数发生在公务员的福利房。</p>

<h2>终于结束大半年的看房历程</h2>

<p>有些说不上是经验的，一些keywords:</p>

<h3>拿一份售房网的城市地图</h3>

<p>上面基本上标出了所有的在售楼盘。</p>

<h3>拒绝纯花瓶售楼小姐</h3>

<p>敲定房屋，交了定金，到后续签订购房合同，在限购政策下，需要准备各种手续，如社保缴纳证明、单身证明、银行按揭材料，这个过程中，特别是不顺利的情况下，都需要销售人员在买房人和开发商之间做桥梁，所以如果售楼小姐只会说些漂亮话，对流程不了解，会让事情难办。</p>

<h3>期房与现房的选择</h3>

<p>现房与期房的单价比较，在期房价格的优惠的部分，可参考比较首付的资金收益及承担的先钱过一段时间货的风险。具体情况，根据是否着急入住，进行定夺，其中期房的入住时间，在开发商交房后，还需要预计装修时间及次年通市政暖气的问题。</p>

<h3>真正保护购房者的，是一纸购房合同。</h3>

<p>签订在房管局备案的购房合同，上面的一切才是真的，所有的什么楼书、户型图都有“最终解释权归开发商所有”。</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2014/02/14/cheng-xu-yuan-mai-fang-bi-ji/'>http://xunyanan.com/blog/2014/02/14/cheng-xu-yuan-mai-fang-bi-ji/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS进阶面试题]]></title>
    <link href="http://xunyanan.com/blog/2013/12/10/iosjin-jie-mian-shi-ti/"/>
    <updated>2013-12-10T21:05:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/12/10/iosjin-jie-mian-shi-ti</id>
    <content type="html"><![CDATA[<p><a href="http://www.onevcat.com">OneV‘s Den</a>在博客里出了10道iOS面试题，用他的话是:&ldquo;列出了十个应聘Leader级别的高级Cocoa/CocoaTouch开发工程师所应该掌握和理解的技术&rdquo; 。
在这里給一份我的答案。<br/>
</br>1. 你使用过Objective-C的运行时编程（Runtime Programming）么？如果使用过，你用它做了什么？你还能记得你所使用的相关的头文件或者某些方法的名称吗？<br/>
Objecitve-C的重要特性是Runtime（运行时）,在#import &lt;objc/runtime.h> 下能看到相关的方法，用过objc_getClass()和class_copyMethodList()获取过私有API;使用</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Method</span> <span class="n">method1</span> <span class="o">=</span> <span class="n">class_getInstanceMethod</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">sel1</span><span class="p">);</span>
</span><span class='line'><span class="n">Method</span> <span class="n">method2</span> <span class="o">=</span> <span class="n">class_getInstanceMethod</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">sel2</span><span class="p">);</span>
</span><span class='line'><span class="n">method_exchangeImplementations</span><span class="p">(</span><span class="n">method1</span><span class="p">,</span> <span class="n">method2</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>
代码交换两个方法，在写unit test时使用到。<br/>
</br>2. 你实现过多线程的Core Data么？NSPersistentStoreCoordinator，NSManagedObjectContext和NSManagedObject中的哪些需要在线程中创建或者传递？你是用什么样的策略来实现的？<br/>
没实现过多线程的CoreData(待实践)</p>

<!--more-->


<p>
</br>3. Core开头的系列的内容。是否使用过CoreAnimation和CoreGraphics。UI框架和CA，CG框架的联系是什么？分别用CA和CG做过些什么动画或者图像上的内容。（有需要的话还可以涉及Quartz的一些内容）<br/>
UI框架的底层有CoreAnimation，CoreAnimation的底层有CoreGraphics.</p>

<table>
<thead>
<tr>
<th>UIKit             </th>
</tr>
</thead>
<tbody>
<tr>
<td> Core Animation   | </td>
</tr>
<tr>
<td> Core Graphics    | </td>
</tr>
<tr>
<td> Graphics Hardware|   </td>
</tr>
</tbody>
</table>


<p>使用CA做过menu菜单的展开收起（太逊了）<br/>
</br>4. 是否使用过CoreText或者CoreImage等？如果使用过，请谈谈你使用CoreText或者CoreImage的体验。<br/>
CoreText可以解决复杂文字内容排版问题。CoreImage可以处理图片，为其添加各种效果。体验是很强大，挺复杂的。<br/>
</br>5.NSNotification和KVO的区别和用法是什么？什么时候应该使用通知，什么时候应该使用KVO，它们的实现上有什么区别吗？如果用protocol和delegate（或者delegate的Array）来实现类似的功能可能吗？如果可能，会有什么潜在的问题？如果不能，为什么？（虽然protocol和delegate这种东西面试已经面烂了…) <br/>
NSNotification是通知模式在iOS的实现，KVO的全称是键值观察(Key-value observing),其是基于KVC（key-value coding）的，KVC是一个通过属性名访问属性变量的机制。例如将Module层的变化，通知到多个Controller对象时，可以使用NSNotification；如果是只需要观察某个对象的某个属性，可以使用KVO。
对于委托模式，在设计模式中是对象适配器模式，其是delegate是指向某个对象的，这是一对一的关系，而在通知模式中，往往是一对多的关系。委托模式，从技术上可以现在改变delegate指向的对象，但不建议这样做，会让人迷惑，如果一个delegate对象不断改变，指向不同的对象。      <br/>
</br>6. 你用过NSOperationQueue么？如果用过或者了解的话，你为什么要使用NSOperationQueue，实现了什么？请描述它和GCD的区别和类似的地方（提示：可以从两者的实现机制和适用范围来描述）。<br/>
使用NSOperationQueue用来管理子类化的NSOperation对象，控制其线程并发数目。GCD和NSOperation都可以实现对线程的管理，区别是 NSOperation和NSOperationQueue是多线程的面向对象抽象。项目中使用NSOperation的优点是NSOperation是对线程的高度抽象，在项目中使用它，会使项目的程序结构更好，子类化NSOperation的设计思路，是具有面向对象的优点（复用、封装），使得实现是多线程支持，而接口简单，建议在复杂项目中使用。
项目中使用GCD的优点是GCD本身非常简单、易用，对于不复杂的多线程操作，会节省代码量，而Block参数的使用，会是代码更为易读，建议在简单项目中使用。
<a href="http://blog.csdn.net/xunyn/article/details/14525243">详细的答案见该文</a><br/>
</br>7. 既然提到GCD，那么问一下在使用GCD以及block时要注意些什么？它们两是一回事儿么？block在ARC中和传统的MRC中的行为和用法有没有什么区别，需要注意些什么？<br/>
使用block是要注意，若将block做函数参数时，需要把它放到最后，GCD是Grand Central Dispatch，是一个对线程开源类库，而Block是闭包，是能够读取其他函数内部变量的函数。<a href="http://blog.csdn.net/xunyn/article/details/11658261">详细的答案见该文</a>。在MRC中__block id x, 块中的x的内存技术是不会改变的。在ARC中，__block id x;默认会retain x，这样会更容易出现循环引用的情况，可在x变量加修饰符__weak(iOS 5.0以上)或__unsafe_unretained(iOS 5.0以下)。<br/>
</br>8. 您是否做过异步的网络处理和通讯方面的工作？如果有，能具体介绍一些实现策略么？<br/>
使用NSOperation发送异步网络请求，使用NSOperationQueue管理线程数目及优先级，底层是用NSURLConnetion，详细可见开源框架<a href="https://github.com/xunyn/LWConnetionDemo">LWConnetion</a>。<br/>
</br>9. 对于Objective-C，你认为它最大的优点和最大的不足是什么？对于不足之处，现在有没有可用的方法绕过这些不足来实现需求。如果可以的话，你有没有考虑或者实践过重新实现OC的一些功能，如果有，具体会如何做？<br/>
最大的优点是它的运行时特性，不足是没有命名空间，对于命名冲突，可以使用长命名法或特殊前缀解决，如果是引入的第三方库之间的命名冲突，可以使用link命令及flag解决冲突。<br/>
</br>10. 你实现过一个框架或者库以供别人使用么？如果有，请谈一谈构建框架或者库时候的经验；如果没有，请设想和设计框架的public的API，并指出大概需要如何做、需要注意一些什么方面，来使别人容易地使用你的框架。<br/>
抽象和封装，方便使用。首先是对问题有充分的了解，比如构建一个文件解压压缩框架，从使用者的角度出发，只需关注发送给框架一个解压请求，框架完成复杂文件的解压操作，并且在适当的时候通知给是哦难过者，如解压完成、解压出错等。在框架内部去构建对象的关系，通过抽象让其更为健壮、便于更改。其次是API的说明文档。</p>

<p>这些问题，多数是没有统一的正确答案的，问题有深度，又是在平时工作会用到的，非常适合大家一起讨论，</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2013/12/10/iosjin-jie-mian-shi-ti/'>http://xunyanan.com/blog/2013/12/10/iosjin-jie-mian-shi-ti/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[生活就是《上种红菱下种藕》]]></title>
    <link href="http://xunyanan.com/blog/2013/12/08/shang-chong-hong-ling-xia-chong-ou/"/>
    <updated>2013-12-08T22:03:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/12/08/shang-chong-hong-ling-xia-chong-ou</id>
    <content type="html"><![CDATA[<p><a href="http://book.douban.com/subject/1505559/">这本书</a>是为讨好某人而买的，从投资角度来看，这是一项预期收益不存在的买卖，总是翻几页后撂倒一旁，有些事情目的太强，就变得无趣，只留下一点对书的念想。有一天，能纯纯地去读书了，选的是这本，一路读了下去，蛮有意思的，有时会笑出声。事情开始得太复杂，便难辨清：有喜欢的必要、喜欢、认为喜欢，彼此纠缠着，无所谓了，只要结束的简单，便有句号，如“读过”。</p>

<p>书的故事很简单，秧宝宝（四年级的小女孩） 从沈溇到华舍镇，在华舍镇寄宿一段时间，又离开。初到陌生环境的秧宝宝 又好奇，又害怕，她找到新的小伙伴(蒋芽儿)，她树立心中的朋友（陆国慎），树立心中的敌人（闪闪），以便认清这个环境。</p>

<p>环境熟悉后，爱的需求便出现了，爱是一个可以让人又超越感的东西，先入为主，不计功利，陆国慎成为她的首选，在所爱的面前，放低身段，去接近，是件令人不安的事，秧宝宝是个孩子，把爱看的太神圣，那便有默默付出的桥段，然后变成默默的痛苦，秧宝宝也是幸运的，“陆国慎”又善良，又比她大很多，能看懂秧宝宝送鸡蛋和织帽子的小心思，并让这些融化在细无声的空气里。</p>

<!-- more -->


<p>心中的想法万千，现实的剧本只有一个，世人的痛苦，来自于心。而如何经历和面对它，这是一生的事情。在蒋芽儿的猫被偷走后，秧宝宝 知道小伙伴的痛苦，陪在她的身边，即使蒋芽儿通过在猫舍里做作业，来向世界宣告她的猫并未走远，也不例外，终于有一天蒋芽儿有了笑容，最后拆除了猫舍，直面痛苦是件很难的事情，过了这关，一旦接受痛苦，那就变成了经历。</p>

<p>生活的预料之中可能是有恃无恐，而意料之外可能是痛苦，秧宝宝也一样，在华舍镇上经历着自己的痛苦，时钟让人一边抛弃，一边继续，抛弃的那部分的痛苦便是成长，是一步步面临痛苦。刻意的忽视，是个减轻痛苦法子，让人想到周星驰的《国产凌凌漆》的去子弹的段子，秧宝宝最后也没和蒋芽儿道别，是慢慢将华舍镇抛在了脑后，把难面对的东西留给明天，明天可能会对此一笑而过，可能有点遗憾，可能痛苦轮回。</p>

<p>生活是上种红菱下种藕，本来的样子在那里，到我们这，便有爱，有痛苦，有面对，有逃避， 带着好奇而来，愿能带着笑容而走。</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2013/12/08/shang-chong-hong-ling-xia-chong-ou/'>http://xunyanan.com/blog/2013/12/08/shang-chong-hong-ling-xia-chong-ou/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mac上安装Rails]]></title>
    <link href="http://xunyanan.com/blog/2013/12/01/install-rails-on-mac/"/>
    <updated>2013-12-01T00:16:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/12/01/install-rails-on-mac</id>
    <content type="html"><![CDATA[<p><a href="http://rubyonrails.org">rails</a>是一套基于<a href="https://www.ruby-lang.org/zh_cn/">ruby</a>的web开发框架。下面是在mac上安装<a href="http://rubyonrails.org">rails</a>的过程。</p>

<h2>环境</h2>

<p>Mac pro (OS X 10.9)</p>

<h2>安装清单</h2>

<p><em><a href="https://developer.apple.com/xcode/">Xcode</a>(苹果开发IDE，需要其中的command line工具)<br/>
</em><a href="https://www.ruby-lang.org/zh_cn/">ruby</a>(开发语言环境)  <br/>
<em><a href="http://brew.sh">Homebrew</a>(包管理环境，安装你需要但苹果不需要的东西)<br/>
</em><a href="https://rvm.io">RVM</a>(ruby版本管理，可以让你在不同的ruby版本下切换)<br/>
*<a href="http://rubyonrails.org">rails</a>(开发框架)</p>

<!--MORE -->


<p></p>

<h2>步骤</h2>

<h3>首先将Xocde安装上</h3>

<p>在终端中输入</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gcc -v</span></code></pre></td></tr></table></div></figure>


<p>
终端返回gcc版本则说明command line已经安装，若没有则可用命令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> xcode-select --install</span></code></pre></td></tr></table></div></figure>


<p>
安装。</p>

<h3>安装git(mac已预装)</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git --version</span></code></pre></td></tr></table></div></figure>


<h3>安装ruby</h3>

<p>在终端输入(mac已预装)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ruby -v</span></code></pre></td></tr></table></div></figure>


<p>
返回ruby版本，则说明mac已预装ruby环境，没有则可去官网安装。</p>

<h3>安装homebrew</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go/install)"</span></code></pre></td></tr></table></div></figure>


<p>安装完后，检查版本</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew -v</span></code></pre></td></tr></table></div></figure>


<h3>安装rvm</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> \curl -L https://get.rvm.io | bash -s stable</span></code></pre></td></tr></table></div></figure>


<p>
安装完成后，检查版本</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm -v</span></code></pre></td></tr></table></div></figure>


<p>
多个ruby版本切换</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm install 1.9.3  
</span><span class='line'>rvm use 1.9.3  
</span><span class='line'>rvm --default 1.9.3</span></code></pre></td></tr></table></div></figure>


<p></p>

<h3>安装Rails</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo gem install rails -V</span></code></pre></td></tr></table></div></figure>


<p>
因为国内万恶的墙的问题，原本应该很顺畅的这一步，在国内就会突然恰到某个包的下载，然后就一直不动了。解决方法是，使用<a href="http://ruby.taobao.org">淘宝的镜像安装</a>(业界良心)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem sources --remove https://rubygems.org/
</span><span class='line'>gem sources -a http://ruby.taobao.org/
</span><span class='line'>gem sources -l</span></code></pre></td></tr></table></div></figure>


<p>
用这个安装完成，便可查看rails版本</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rails -v</span></code></pre></td></tr></table></div></figure>


<p>
创建一个测试工程，检查环境是否安好</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rails new hello --skip-bundle  </span></code></pre></td></tr></table></div></figure>


<p>
加上&mdash;skip-bundle还是墙的原因，然后我们要在新建的项目中，手动的为它安装bundle。<br/>
新建项目之后再安装bundle,进入到项目中，打开Gemfile,修改第一行：source &lsquo;<a href="https://rubygems.org">https://rubygems.org</a>&#8216;修改为：source &#8217;<a href="http://ruby.taobao.org">http://ruby.taobao.org</a>&rsquo;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install bundle  </span></code></pre></td></tr></table></div></figure>


<p>
使用cd命令进入hello文件夹，尝试启动rails的server服务，看是否正常。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rails server</span></code></pre></td></tr></table></div></figure>


<p>
如果报错：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Could not find gem 'sdoc (&gt;= 0) ruby' in the gems available on this machine.  
</span><span class='line'>Run `bundle install` to install missing gems.  </span></code></pre></td></tr></table></div></figure>


<p>
继续使用命令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>bundle install  </span></code></pre></td></tr></table></div></figure>


<p></p>

<p>至此，继续使用rails server命令，如果看到</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>=&gt; Booting WEBrick
</span><span class='line'>=&gt; Rails 4.0.1 application starting in development on http://0.0.0.0:3000
</span><span class='line'>=&gt; Run `rails server -h` for more startup options
</span><span class='line'>=&gt; Ctrl-C to shutdown server
</span><span class='line'>[2013-12-01 01:09:34] INFO  WEBrick 1.3.1
</span><span class='line'>[2013-12-01 01:09:34] INFO  ruby 2.0.0 (2013-06-27) [universal.x86_64-darwin13]
</span><span class='line'>[2013-12-01 01:09:34] INFO  WEBrick::HTTPServer#start: pid=1130 port=3000</span></code></pre></td></tr></table></div></figure>


<p>
说明启动成功，至此，已安装好rails的环境，步数较多，需要耐心，如果出现权限问题的提示，就在相应的命令前加sudo，来提高权限即可。</p>

<h2>Q&amp;A</h2>

<h3>停止rails服务（我的Mac电脑使用ctrl+c 停止后，进程依然在）</h3>

<ol>
<li>找到占用tcp 3000端口的进程</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsof -wni tcp:3000</span></code></pre></td></tr></table></div></figure>


<p>
2. 杀掉进程</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ kill -9 PID</span></code></pre></td></tr></table></div></figure>


<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2013/12/01/install-rails-on-mac/'>http://xunyanan.com/blog/2013/12/01/install-rails-on-mac/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[制做自己的马赛克微信头像]]></title>
    <link href="http://xunyanan.com/blog/2013/11/26/mosaic-photo-and-share-moment/"/>
    <updated>2013-11-26T22:49:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/11/26/mosaic-photo-and-share-moment</id>
    <content type="html"><![CDATA[<h2>想法</h2>

<p>2013年接近尾声了，有的媒体会用马赛克的方式，把一年中的大事件汇集到一张图片上。印象中天才少年<a href="http://www.matrix67.com/">Matrix67</a>曾使用<a href="http://zh.wikipedia.org/zh-cn/Mathematica">Mathematica</a>制作过自己马赛克头像，于是便有了用微信朋友圈里的图片来制作一个自己的微信头像。<br/>
<img src="http://xunyanan.com/images/blog/mosaic_me_2011.jpg" alt="马赛克头像" /><br/>
觉得不像我，可以离开座位，退后一点，离显示器远点看这张图片。</p>

<!--more-->


<p></p>

<h2>动手</h2>

<p>使用到的工具：<br/>
<em>Mac(os x 10.9)电脑(windows也可以做，替换相应的工具即可)<br/>
</em><a href="http://www.wolfram.com/mathematica/">Mathematica 9.0</a><br/>
<em><a href="http://www.google.cn/intl/zh-CN/chrome/">Chrome</a> and <a href="https://chrome.google.com/webstore/detail/bulk-download-imageszig/gfjhimhkjmipphnaminnnnjpnlneeplk">batch image download</a><br/>
</em>Preview and <a href="http://ifunapple.com/2013/07/a-better-finder-rename-9/">A better finder rename</a></p>

<h3>筹集素材</h3>

<p>制作马赛克头像的第一步是什么？要有足够的马赛克（心中无码可跳过），脑子的想法便是微信朋友的头像，有足够的好友数量，便有很多素材，这些素材，还是有统一尺寸的。要获得这些素材，有几个方法。</p>

<h4>从手机中获得素材</h4>

<p>从手机将微信App导出，从中找到头像文件夹。这是第一想法，没试成，用的iPhone手机，升了iOS7.0，越不了狱，看不到微信的文件夹。android的童鞋可以试下，但有可能腾讯没把素材按JPEG放到文件，可能放到SQLite里，这样的话，这个方法就用不了了。</p>

<h4>从微信网站下载素材</h4>

<p><a href="https://wx.qq.com">微信新推出了网页版</a>，可以做的事情就多了一些。<a href="(https://wx.qq.com">打开微信网页版后</a>),用手机扫描二维码登陆后，可以看到微信网页版的聊天界面，看到朋友们的信息。在这里我走个小弯路（点击跳过此段内容），这个弯路是用<a href="http://www.w3school.com.cn/js/">Javascript</a>和<a href="http://nodejs.org/">nodejs</a>来完成从网站扒朋友头像的任务。</p>

<h5>JS获得头像url代码</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">a</span> <span class="p">()</span> <span class="p">{</span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">images</span><span class="p">;</span> <span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span> <span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;hide_src&quot;</span><span class="p">)){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;hide_src&quot;</span><span class="p">))}</span> <span class="p">}</span> <span class="p">}</span> <span class="nx">a</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<h5>使用nodejs的request下载素材到本地文件</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// Dependencies </span>
</span><span class='line'><span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">exec</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;child_process&#39;</span><span class="p">).</span><span class="nx">exec</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">spawn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;child_process&#39;</span><span class="p">).</span><span class="nx">spawn</span><span class="p">;</span>
</span><span class='line'><span class="c1">// App variables </span>
</span><span class='line'><span class="kd">var</span> <span class="nx">file_url</span> <span class="o">=</span> <span class="s1">&#39;http://xunyanan.com/images/blog/PowerOfNow.png&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">DOWNLOAD_DIR</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span><span class="p">;</span>
</span><span class='line'><span class="c1">// We will be downloading the files to a directory, so make sure it&#39;s there </span>
</span><span class='line'><span class="c1">// This step is not required if you have manually created the directory </span>
</span><span class='line'><span class="kd">var</span> <span class="nx">mkdir</span> <span class="o">=</span> <span class="s1">&#39;mkdir -p &#39;</span> <span class="o">+</span> <span class="nx">DOWNLOAD_DIR</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">exec</span><span class="p">(</span><span class="nx">mkdir</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stdout</span><span class="p">,</span> <span class="nx">stderr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>    <span class="k">else</span> <span class="nx">download_file_httpget</span><span class="p">(</span><span class="nx">file_url</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="c1">// Function to download file using HTTP.get </span>
</span><span class='line'><span class="kd">var</span> <span class="nx">download_file_httpget</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file_url</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">host</span><span class="o">:</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">file_url</span><span class="p">).</span><span class="nx">host</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">port</span><span class="o">:</span> <span class="mi">80</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">path</span><span class="o">:</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">file_url</span><span class="p">).</span><span class="nx">pathname</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">file_name</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">file_url</span><span class="p">).</span><span class="nx">pathname</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">).</span><span class="nx">pop</span><span class="p">();</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="nx">DOWNLOAD_DIR</span> <span class="o">+</span> <span class="nx">file_name</span><span class="p">);</span>
</span><span class='line'><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">);</span>
</span><span class='line'>         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">file</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">file</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</span><span class='line'>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">file_name</span> <span class="o">+</span> <span class="s1">&#39; downloaded to &#39;</span> <span class="o">+</span> <span class="nx">DOWNLOAD_DIR</span><span class="p">);</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h5>一切准备妥当，发现微信的链接是https的，直接用url是新建http连接是获得不了东西的。这就和泡好了方便面，发现没配叉子一样。就换了条其他的路，放代码出来，大家可以研究下，如何用脚本建立上https的请求，毕竟脚本的方法能控制更多东西。</h5>

<h4>新的道路，使用<a href="http://www.google.cn/intl/zh-CN/chrome/">Chrome</a> and <a href="https://chrome.google.com/webstore/detail/bulk-download-imageszig/gfjhimhkjmipphnaminnnnjpnlneeplk">batch image download</a>插件</h4>

<p>如果去年抢过火车票，那估计电脑里都还有Chrome，<a href="https://chrome.google.com/webstore/detail/bulk-download-imageszig/gfjhimhkjmipphnaminnnnjpnlneeplk">batch image download</a>比较好用，安装完成后便在右键菜单中可以看到。就是要注意，要先把朋友列表拖动一下，让所有的朋友头像都在网页上刷新出来，这样才可以下载全部的。</p>

<h3>整理素材</h3>

<p>现在有了几百张朋友的头像，Mathematica需要的是统一尺寸的正方形jpg图像，大概每张图片的像素在20*20~~40*40之间,要先整理一下图片。</p>

<h4>首先删除不是正方形的图像</h4>

<p>里面会有群组的头像，这个也可以选择删掉</p>

<h4>重命名整理图片（可跳过）</h4>

<ol>
<li>使用shell 命令批量重名</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">j</span><span class="o">=</span><span class="mi">100</span><span class="p">;</span><span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="o">*</span><span class="p">;</span><span class="k">do</span> <span class="kd">let</span> <span class="nx">j</span><span class="o">+=</span><span class="mi">1</span><span class="p">;</span><span class="nx">mv</span> <span class="s2">&quot;$i&quot;</span> <span class="s2">&quot;${i%.*}$j.jpg&quot;</span><span class="p">;</span><span class="nx">done</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>使用<a href="http://ifunapple.com/2013/07/a-better-finder-rename-9/">A better finder rename</a></li>
</ol>


<h4>将132*132的头像图片像素变小</h4>

<p>推荐使用Mac自带的<a href="http://zh.wikipedia.org/zh-cn/Automator">atuomator</a>做这项任务，通过鼠标拖动，就能安排这个小机器人给你干活，是见很有意思的事情。对于<a href="http://www.macx.cn/thread-2030978-1-1.html">自定义缩放图像</a>这里有一份详细的教程。<br/>
在脑海中先好要让机器人做什么，比如第一步先把图片拷贝到每个目录，然后在把这些图像尺寸缩小。编辑好flow后，保存好后，便可以通过右键看到自己命名的操作，然后选中文件操作。用完之后，如果不想右键点击后，还出现自定义的操作，可以在automator删除services工作流，进到目录[username]/Library/Services下删除对应名字的workflow，就可以了。</p>

<h4>制作黑白素材</h4>

<p>将所有的头像图片，制作一份黑白素材，放在一起组成新的图像库。从Mathematica生成马赛克图片的上说，素材图库中图片越多，然后有黑白色图片低对比度图片，生成出来的头像，会效果更好。每一个素材库的图片都会是当一个像素去对应到最终生成的头像图片上。制作黑白素材的方法有三种方法：<br/>
1. automator小机器人可以做<br/>
2. 使用priview调节饱和度(Saturation)<br/>
3. 使用photoshop调节颜色通道
效果上从上到下越来越好，功夫上也是从上到下越费越多。建议第二种。</p>

<h3>制作图片</h3>

<p>制作马赛克图片我们用的是<a href="http://www.wolfram.com/mathematica/">Mathematica 9.0</a> (<a href="http://www.bjt.name/2011/06/mosaic-plot-with-r/">用R语言的看这里</a>)。先看看下这经典的三行代码，向<a href="http://blog.wolfram.com/2008/05/02/%0Amaking-photo-mosaics/">Theodore Gray</a>致敬。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">imagePool</span> <span class="o">=</span> <span class="nx">Map</span><span class="p">[</span><span class="nx">With</span><span class="p">[{</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">Import</span><span class="p">[</span><span class="err">#</span><span class="p">]},</span> <span class="p">{</span><span class="nx">i</span><span class="p">,</span> <span class="nx">N</span><span class="err">@</span><span class="nx">Mean</span><span class="p">[</span><span class="nx">Flatten</span><span class="p">[</span><span class="nx">ImageData</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="mi">1</span><span class="p">]]}]</span> <span class="o">&amp;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">FileNames</span><span class="p">[</span><span class="s2">&quot;/Users/xunyanan/Desktop/webwx_img/*.jpg&quot;</span><span class="p">]];</span>
</span><span class='line'><span class="nx">closeMatch</span><span class="p">[</span><span class="nx">c_</span><span class="p">]</span> <span class="o">:=</span>
</span><span class='line'> <span class="nx">RandomChoice</span><span class="p">[</span><span class="nx">Nearest</span><span class="p">[</span><span class="nx">imagePool</span><span class="p">[[</span><span class="nx">All</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span> <span class="o">-&gt;</span> <span class="nx">imagePool</span><span class="p">[[</span><span class="nx">All</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="nx">c</span><span class="p">,</span> <span class="mi">20</span><span class="p">]]</span>
</span><span class='line'><span class="nx">ImageAssemble</span><span class="p">[</span>
</span><span class='line'> <span class="nx">Map</span><span class="p">[</span><span class="nx">closeMatch</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">ImageData</span><span class="p">[</span><span class="nx">Import</span><span class="p">[</span><span class="s2">&quot;/Users/xunyanan/Desktop/2011me.tiff&quot;</span><span class="p">]],</span> <span class="p">{</span><span class="mi">2</span><span class="p">}]]</span>
</span></code></pre></td></tr></table></div></figure>


<p>
第一行就是把建立了一个制定路径的图像库;第二行写了个匹配函数，函数的内容是找出最接近的20个图片，并随机选择;第三行是导入目标图片，并调用函数closeMatch生成图像结果。</p>

<h4>目标图片tiff格式的头像照片</h4>

<p>找一张自己的头像图片，然后把它处理成20*20像素的tiff格式(<strong>注意在保存tiff格式时，一定不要勾选Alpha通道</strong>)。如果选择像素大于20的图片，生成时间会长一些。</p>

<h4>生成马赛克头像</h4>

<p>在<a href="http://www.wolfram.com/mathematica/">Mathematica 9.0</a> 新建note book，然后，将三行代码拷入其中，并把路径改成自己的文件位置。右键选择Evaluation cell，便可看到结果。</p>

<h2>分享到微信朋友圈</h2>

<p>可以用<a href="http://open.weixin.qq.com/intro/">微信的开放平台</a>把自己的头像分享回微信。我的<a href="http://xunyanan.com/blog/2013/11/16/build-octopress-blog/">个人博客网站</a>用的的是加网分享，点击分享，扫描二维码即可完成。</p>

<h3>在个人博客网站添加加网的方法是</h3>

<h4>注册加网后，获得加网生成的js</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!-- JiaThis Button BEGIN --&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">jiathis_config</span> <span class="o">=</span> <span class="p">{</span><span class="nx">data_track_clickback</span><span class="o">:</span><span class="s1">&#39;true&#39;</span><span class="p">};</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;[your url]&quot;</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="c">&lt;!-- JiaThis Button END —&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>将此段代码添加到个人网站中，<a href="http://xunyanan.com/blog/2013/11/16/build-octopress-blog/">详见这篇</a>。</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2013/11/26/mosaic-photo-and-share-moment/'>http://xunyanan.com/blog/2013/11/26/mosaic-photo-and-share-moment/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[《万历十五年》摘抄]]></title>
    <link href="http://xunyanan.com/blog/2013/11/23/mo-li-shi-wu-nian/"/>
    <updated>2013-11-23T00:27:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/11/23/mo-li-shi-wu-nian</id>
    <content type="html"><![CDATA[<h2>摘抄</h2>

<p>人们口头公认的理想称为”阳“ ，人们不可能告人的私欲称为”阴“，调和阴阳是件复杂的工作。</p>

<p>至于官员本身，向这种社会风气投降的程度则各有不同。大多数人觉得在似合法又似非法之间取得一部分额外收入，补助官俸的不足，以保持他们士大夫阶级的生活水准，于清操无损。另有相当数量的官员，则声名狼籍，其搜刮自肥的劣迹令人愤慨。再有一部分极端人物，则属清高自负，一介不苟取于人，这绝对的道德观念，可以由古怪的南京都御史海瑞作为代表。这三者的差别，也就是文官之间不能和谐的一大原因。</p>

<p>因之我们的政事，注重体制的安定，而不计较对一人一事的绝对公允。牺牲少数人，正是维持大局的办法。</p>

<!-- more -->


<p>虽然承认现实，但又不能放弃理想
警惕” 沽名卖直“
权术有总是和诚信背道而驰的。
张居正的全套措施，彻底暴露了这一大帝国中央集权过度的不良后果。在下层行政单位间许多实际问题尚未解决以前，行政效率的增进，必然是缓慢的、有限度的。强求效率增高，超过这种限度，只会造成行政系统的内部不安，整个文官集团会因压力过高而分裂；而纠纷一起，实际问题又会升级成为道德问题。</p>

<p>本朝的制度，应当说是不能听任这种党争发展的。我们的司法制度极为简单，缺乏判决争端的根据。即使是技术上的问题送交御前请求决定，也要翻译成为道德问题，以至善或极恶的名义作出断语。在这种具体情况下，只有使全部文官按照“四书”的教导，以忠厚之道待人接物，约束自己的私心，尊重别人的利益，大事化小，小事化无，朝廷才能上下一心，和衷共济。要是官员们口诵经典中的词句，称自己为君子，别人为小人，在道德的掩盖下夺利争权，这就是把原则整个颠倒了。</p>

<p>本朝的法律就不外是行政的一种工具，而不是被统治者的保障</p>

<p>这样的立法意在避免技术上的复杂，简化案情中的疑点，而在大众中造成一种清官万能的印象</p>

<p>可见我们帝国的政治措施至此已和立法精神脱节，道德伦理是道德伦理，做事时则另有妙法</p>

<p>对一个英雄人物的隐恶扬善，并不是正真的推崇。</p>

<p>在王朝制度下，很难把个人的玩忽职守和制度的失败分得开。个人应尽最大的努力，用自己的才干和自我牺牲来掩盖制度上的弱点.</p>

<h2>观点</h2>

<h3>礼与权</h3>

<p>“嫂溺，援之以手”出自<a href="http://baike.baidu.com/subview/2655/4905061.htm">《孟子》</a>的《离娄章句上》。<br/>
<em>淳于髡 (1)曰：“男女授受不亲，礼与？”
孟子曰：“礼也。”
曰：“嫂溺，则援之以手乎？”
曰：“嫂溺不援，是豺狼也。男女授受不亲，礼也；嫂溺，援 之以手者，权(2)也。”
曰：“今天下溺矣，夫子之不援，何也？” 曰：“天下溺，援之以道；嫂溺，援之以手——子欲手援天下 乎？”[1]</em></p>

<p>这是孟子对礼与权的解释，这种原则和例外，亦是古人所说的经与权。
表明礼或经在平时的的严格执行，和在特殊情况的特殊处理，这是理论与现实之间存在的鸿沟，而理论和道德的解释权，才是最重要的东西，对于高度抽象的“仁“、”孝“，同样的事实可能有多种解释，比如张居正的父亲死了，要去服丧守孝三年，是对的 ，但他在朝廷做首辅，要辅佐皇帝，要为社稷苍生，也是对的。道德是阐述了人们的美好愿望，要“礼孝天下，仁义先行”，但希冀道德构建和谐社会，就天真了，道德观念相互之间有冲突时，就有一个“解释权”的问题，这往往有权势决定。如薄熙来入主重庆时，重庆如迎来的“红太阳”；被法院宣判时，媒体要树立的形象是贪官污吏。事实尘封在土中，装着未曾打开的样子。</p>

<h3>体制的安定</h3>

<p><em>因之我们的政事，注重体制的安定，而不计较对一人一事的绝对公允。牺牲少数人，正是维持大局的办法。</em><br/>
当下中国，依然是这个趋势，抓个小贪官，不合法律的快速处理，似乎大快人心，实则对制度毫无建树，对于唐慧案，因弱势和媒体曝光，而从严处理，所有这一切，求的全是稳定，而不是公正，不是制度。而这一些背后的逻辑是，政府想维持垄断权利，P民活不下去，“刁民”冲击秩序，基层政府“维稳”妥协，事情的处理结果，由社会关注程度和“刁民”程度决定。越来越多的P民，加入“刁民”行列，社会风气越来越不好。</p>

<h2>历史</h2>

<p>读历史在宏观的角度看问题，层面高远，在结合当今之种种，容易让人怒气旁生，匪气侧漏，搁到以前要看几晚新闻联播“疗伤”，现在要看几本专业书，多杀些脑细胞，平复心情。</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2013/11/23/mo-li-shi-wu-nian/'>http://xunyanan.com/blog/2013/11/23/mo-li-shi-wu-nian/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[我读书]]></title>
    <link href="http://xunyanan.com/blog/2013/11/21/i-read/"/>
    <updated>2013-11-21T22:29:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/11/21/i-read</id>
    <content type="html"><![CDATA[<p>恍惚间，已经走过四分之一个世纪多一点了（好吓人啊），书伴我一路走来，扮演重要角色。</p>

<h2>懵懂学语</h2>

<p>“太阳当空照，花儿对我笑，小鸟说早早早，你为什么背上小书包？我要上学校&hellip;”，在学校识了写大字后，便开始看书，印象中家里是有几本小人书，记得看完<a href="http://book.douban.com/subject/6539507/">《精卫填海》</a>，觉得精卫真可怜。还有一次进城，妈妈给买了本<a href="http://book.douban.com/subject/2160556/">《十万个为什么》</a>,买的是本生活版，记得上面有不让挖耳屎，说会伤到外耳道；不让用牙签挑牙，会扩大牙齿的缝隙。在一次小时候看医生的时候，医生告诉我，要常挖耳屎。心目中两个权威，给了不一样的答案，幼小的心灵第一次开始纠结；小的时候也没有见过牙签，一直想象了很久，牙签会长成什么样？</p>

<h2>饥不择食</h2>

<p>慢慢升了年纪，认识的字也多些了，开始翻出家里带字的“东西”，乱读一气。当时有个很流行的杂志<a href="http://baike.baidu.com/link?url=IDJjmhi18Oq_9TRaRLBjtvILpveXcRjPoxzh7i4QOWyn2VVohZ79TWOz6ubaHeRb">《半月谈》</a>,读完全然不太知道在说什么,去读课外读物《在希望的田野上》。那时候应该受父母和老师的引导比较深，可能当时已经知道，在那乖乖安静的读会书，没准就能获得父母的夸奖和老师赞赏，慢慢变成个爱看书的孩子。这时候读了一本“天书”，是罗洛·梅的<a href="http://book.douban.com/subject/4834599/">《爱与意志》</a>,罗洛·梅是存在主义和人本主义的大师，但在上世纪90年代的中国，可能大学里会对他有很多关注，在民间那会<a href="http://baike.baidu.com/view/2215.htm?force=1">弗洛伊德</a>的名字都不太响亮吧，书应该更稀少，所以它真是一本“天书”，而让一个十来岁的孩子去读，那是暴殄天物，而那个“天物”，不仅是书籍。对于当时的孩子，还是很难理解“性的焦虑”和“自由意志”，讲爱神丘比特一直是个孩子，因为“没有激情的爱是长不大的”，里面有些希腊神话的例子：如<a href="http://baike.baidu.com/subview/49444/10610618.htm?fromId=290296">俄底浦斯王</a>(杀父娶母的悲剧一生)，让我好奇地，全然不明白地又读了一遍，然后留下了挥之不去的小阴影。所以，真心觉得书籍和电影，都应该搞分级制度，合适的年龄去看适合的书籍。</p>

<!-- more-->


<h2>读书可以娱乐</h2>

<p>初中之后，接触到了武侠小说，看的第一本武侠小说是《新七侠五义》，身怀本领的兄弟们聚在一起“干大事”，发现原来还有情节这么精彩的书。从那之后，便看了<a href="http://baike.baidu.com/view/2969.htm">古龙</a>、<a href="http://baike.baidu.com/view/2619.htm">金庸</a>、<a href="http://baike.baidu.com/view/3432.htm">梁羽生</a>。在那段青春，男生多半武侠，幻想这有那么一天，也能阴差阳错得到一本武林秘笈，然后拿来练习，出去行侠仗义；女生多半言情，幻想着<a href="http://baike.baidu.com/subview/6866/4925095.htm?fromId=6866&amp;from=rdtself">琼瑶</a>大姐的爱情女主角。</p>

<h2>选书关乎个人品味</h2>

<p>到高中后，身边的书也多了很多，有校外的租书店，有校内的小图书馆，读书变得有选择。老师鼓励大家去读世界名著，便努力去附庸风雅，去读<a href="http://book.douban.com/subject/1007433/">《红与黑》</a><a href="http://book.douban.com/subject/4893870/">《飘》</a>、<a href="http://book.douban.com/subject/1203244/">《三个火枪手》</a>、<a href="http://book.douban.com/subject/1024197/">巴黎圣母院</a>、<a href="http://book.douban.com/subject/1885218/">苔丝</a>、<a href="http://book.douban.com/subject/1186350/">红字</a>,因年龄、生活环境、翻译水平等，这些东西多数读起来是一知半解，但又总觉自己要从这些世界名著中读懂些什么，于是阅读完全变成了负担。当然广撒网，总会有一些别的收获，有几本书重要的，有种刻在脑子里的念念不忘：钱钟书的<a href="http://book.douban.com/subject/1008145/">《围城》</a>，<a href="http://baike.baidu.com/subview/2137/8714737.htm">张爱玲</a>的作品(倾城之恋、十八春等)。</p>

<h2>多媒体的时代</h2>

<p>在本世纪，IT和互联网技术在深刻的改变生活，大学时期，图书馆有很多书，有很好的读书环境，但这些难以抵挡PC，从网吧的电脑到寝室的电脑，看书的享受远比不上电脑上的游戏和电影。在这个适合读书的季节，星际、魔兽争霸、魔兽世界、dota才是真正的主角，书的娱乐功能能渐渐被替代。在夹缝的时间中，也读了<a href="http://baike.baidu.com/subview/2571/6230942.htm">《红楼梦》</a>，完成了中国四大名著的拼图，看了些经济学和心理学的入门书籍。</p>

<h2>工作之后</h2>

<p>IT技术单机到互联网，再到移动互联网，到云计算，到大数据，变化让时代关心的是效率，如何最快、最有效的传递和接受信息，变成了时代旋律，而看书天生便是慢和静的生活。从遇事问<a href="http://www.baidu.com/index.php?tn=baiduhome_pg">度娘</a>，到用手机查一查，知识随手便来。好在看书的习惯没完全丢，对于写代码工作，关注了些大牛的博客，但获得系统和有深度有难度的知识，还是要读书。读了<a href="http://book.douban.com/subject/2024655/">《数据结构》</a>、<a href="http://book.douban.com/subject/1482240/">《深入浅出MFC》</a>、<a href="http://book.douban.com/subject/20309891/">《iOS设计模式》</a>等一批大牛的书，其实这些电子版也都有的下载，但电脑的多焦点的，是非常容易分散注意力的，听着哗哗的翻书声，知道自己有读懂了几页，那是种幸福的感觉。<br/>
随着年龄的增加，自由阅读的书籍的范围也越来越广，从“文学”开始，到泛文学，穿越小说，职场小说，随笔什么的，再到经济、历史、社会、心理等，用自己的钱自由的买书，在自由的时间去自由的读书，这是儿时的梦想之一，只是现在时间变成了奢侈品，除了工作生活，一天仅剩的时间要去追美剧，看直播，发微信，然而不论信息媒介如何发展，这最初的文明传播方式，心灵的有些角落是属于它。</p>

<h2>收获</h2>

<p>小时候喜欢读书，现在忖度下，个子小不擅长体育运动，读书又能获得表扬，“自然”便会喜欢上读书，大了慢慢也就成了习惯。对于读书的得到，想来好像很切实也没有什么，从事现在的软件开发工作，也主要是大学时修的计算机专业，想来阅读也和生活中其他事一样，怀着好奇走来，慢慢以得失算计回报，规划如何怎样，殊不知现实从不批梦幻的外衣，到最后发现阅读是件与他人无关的事情，也只有这样才是在享受阅读。</p>

<h2>我的书单</h2>

<p>照例开个书单，纯主观。</p>

<h3>影响我最大的十本书</h3>

<h4>历史</h4>

<p><a href="http://book.douban.com/subject/1025643/">《全球通史》</a>L. S. 斯塔夫里阿诺斯的书，讲述的是人类的历史，而不是民族和国家的，视角是全球的，一国的远征，便是另一个的卫国战争；一个民族的崛起，伴随着另一文明的衰落。<br/>
<a href="http://book.douban.com/subject/1041482/">《万历十五年》</a> 黄仁宇 的大历史观的奠基之作，道出中央集权过度下的官僚体系，无论是明太祖的酷刑（制度手段），张居正的铁腕（管理手段），海瑞的清廉（道德手段），万历皇帝的不合作。在不“三权分立”下，都无法解决官僚体系的内生需求，稳定低效，上谄媚下欺压。参看现如今。<a href="">摘抄</a>。</p>

<h4>心理学</h4>

<p><a href="http://book.douban.com/subject/3389960/">《自卑与超越》</a>  阿尔弗雷德·阿德勒 颠覆弗洛伊德体系的著作，用自卑驱动去重新阐述人的内心需求。<br/>
<a href="http://book.douban.com/subject/2277299/">《当下的力量》</a> 埃克哈特·托利 面临痛苦时，读出不一样的自我。<a href="http://xunyanan.com/blog/2013/11/18/%3C%3Cdang-xia-de-li-liang-%3E%3E-du-shu-bi-ji/">读书笔记</a>。</p>

<h4>经济学</h4>

<p><a href="http://book.douban.com/subject/1028842/">《经济学原理》</a> 曼昆 了解经济学知识，政府房地产调控的政策，多收交易税和打击需求，都是在和经济学原理背道而驰，而真正高价只来源于“垄断”。<br/>
<a href="http://book.douban.com/subject/24851460/">《历代经济变革得失》</a> 吴晓波 的话：“在看得见的未来，中国的经济和政治改革很可能是一次以自由市场化为取向，以维持”统一文化“为边界、在民主法治与中央集权体制之间寻找平衡的非西方式改革”。</p>

<h4>国内文学</h4>

<p><a href="http://book.douban.com/subject/1008145/">《围城》</a> 钱钟书 钱老用幽默，讲一个得不到时躁动，拥有后想逃离的故事。<br/>
<a href="http://book.douban.com/subject/1004992/">《张爱玲文集》</a> 张爱玲 本人最喜欢的女作家，推荐《倾城之恋》《金锁记》《红玫瑰与白玫瑰》。</p>

<h4>国外文学</h4>

<p><a href="http://book.douban.com/subject/1017143/">《不能承受的生命之轻》</a>  米兰·昆德拉  他的故事飘在云端，而在中国，有天生的不能承受的生命之重，让人匍匐在土地上，自由仅存在爬行之中。<br/>
<a href="http://book.douban.com/subject/1894742/">《红与黑》</a> 司汤达 的墓志铭：“米兰人,写作过,恋爱过,生活过”。 书中主人公于连，总在找机会面对自己。</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2013/11/21/i-read/'>http://xunyanan.com/blog/2013/11/21/i-read/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[《当下的力量》读书笔记]]></title>
    <link href="http://xunyanan.com/blog/2013/11/18/%3C%3Cdang-xia-de-li-liang-%3E%3E-du-shu-bi-ji/"/>
    <updated>2013-11-18T21:59:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/11/18/<<dang-xia-de-li-liang->>-du-shu-bi-ji</id>
    <content type="html"><![CDATA[<p><a href="http://baike.baidu.com/view/1650183.html">《当下的力量》</a>是早些时候读的一本书，在脑子里留下深刻的印象。当时读完脑海中便有这样一张图片：<br/>
<img src="http://xunyanan.com/images/blog/PowerOfNow.png" alt="The power of now" /><br/>
这是本讲如何面对痛苦的书籍，但不是那种“阳光总在风雨后”、“明天就会好起来”那种所谓“温暖励志”的书籍，作者<a href="http://baike.baidu.com/view/2522607.htm">埃克哈特·托利</a>本身也很传奇，有受<a href="http://zh.wikipedia.org/zh-cn/%E5%8E%9F%E5%A7%8B%E4%BD%9B%E6%95%99">原始佛教</a>的影响，从他的书中，能获得直面痛苦的力量。</p>

<!--more -->


<p>“我是谁？”和“我将成为誰”，是两个很抽象的问题，不太有什么真正的答案，但每个人都在生活中实践着。一次面试，你要告诉面试官的曾经学习工作的经历;一次工作的选择，是公务员，还是企业，成为做着什么工作的人？我们带着所有记忆，朝着梦想出发，而路途往往坎坷，难以预料的事情发生，带来痛苦，是驻足回望，是弥补修复，是擦干眼泪，总有一些事，要自己艰难的去面对，痛苦便是一件。</p>

<p>朝着理想出发这件事，中国孩子是从小被要求的，当<a href="http://v.youku.com/v_show/id_XMjE4MDU1MDE2.html">《老男孩》</a>一出，感动了一批中国年轻人，它以轻松搞笑的表现，展现梦想的残酷与美丽，而所有尝试追寻梦想的人，都有道路曲折的共鸣。就像一个有50名小朋友的班级，有30个小朋友，有梦想去做第一名，现实是第一名只有一个，那其他的29名小朋友，要伤心一阵。然后当第一的小朋友发现，自己当了第一名后，天天想的是跟班里最漂亮的小姑娘“做朋友”，而那个小姑娘却不理他，现实有的时候便是如此荒诞。这种“求之不得”的痛苦，在佛那里的答案便是“不求”，对于现实生活，这很难是个答案，而直面痛苦，是一个解决之道，在<a href="http://baike.baidu.com/view/36367.htm">人本主义心理学</a>那,经历的痛苦就是成长。<br/>
梦想的所带来的美好与痛苦，如同一个硬币的两面，总是相伴出现，如何面对它，书中用“过去”“当下”“未来”重新解构梦想，那些喜悦，是幻想梦想实现时获得，那些痛苦，是对现实情况不接受所获得的，而这些不在当下的东西，折磨这活在此刻的我们。被折磨个几次，慢慢发现，原来梦想是个中性词。</p>

<p>书里的内容，比上面要丰富得多，我在看完后，曾写下：“未来和过去对我们的意义必须通过“现在”才得以实现，“当下”如同过去和未来的连接点，既推进着我们，又引导着我们，走向下一个“当下””。并把人生目标设定为：享受自己的创造力，感受生命的极致。
这个目标，挺难做到的，特别是我这样世俗的人，很难完完全全活在当下，依然会去追寻薪水高的工作，但如书名<a href="http://baike.baidu.com/view/1650183.html">《当下的力量》</a>，除了“当下”
，还有“力量”，教会我，在痛苦来的时候，不抗拒情绪，去认清现实，放手和接受。感受当下的阳光，它永远比上一刻的阳光灿烂，比下一刻的阳光真实。</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2013/11/18/%3C%3Cdang-xia-de-li-liang-%3E%3E-du-shu-bi-ji/'>http://xunyanan.com/blog/2013/11/18/%3C%3Cdang-xia-de-li-liang-%3E%3E-du-shu-bi-ji/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[薪火相传]]></title>
    <link href="http://xunyanan.com/blog/2013/11/16/xin-huo-xiang-chuan/"/>
    <updated>2013-11-16T21:55:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/11/16/xin-huo-xiang-chuan</id>
    <content type="html"><![CDATA[<p>参与<a href="http://www.comp-on.org">传知公益基金</a>赴甘肃庆阳市环县木钵镇中心小学建立传知电脑室。</p>

<h2>做义工行程记录:</h2>

<h3>11月2号:</h3>

<ol>
<li>9点从西安出发，去机场与香港广州的同事汇合.</li>
<li>11点从机场出发做大巴去甘肃环县。</li>
</ol>


<!--more -->


<p><img src="http://img.blog.csdn.net/20131105215558796" alt="永寿收费站" /><br/>
从庆阳去环县的路上.<br/>
<img src="http://img.blog.csdn.net/20131105220256203" alt="千沟万壑" /><br/>
3. 晚上8点到达环县，吃晚饭，检修电脑，住宿<br/>
<img src="http://img.blog.csdn.net/20131105221336328" alt="干活的同事" /></p>

<h3>11月3号：</h3>

<ol>
<li>早上7点起床，吃早餐，前往木钵镇中心小学</li>
<li>8点半简单的揭幕仪式<br/>
<img src="http://img.blog.csdn.net/20131105220256203" alt="仪式现场" /></li>
<li>9点开始教学，分为软件班和硬件班<br/>
<img src="http://img.blog.csdn.net/20131105221510078" alt="孩子的校园" />
<img src="http://img.blog.csdn.net/20131105221200812" alt="教材" /><br/>
<img src="http://img.blog.csdn.net/20131105220512343" alt="义工和当地老师的合影" /></li>
<li>下午4点半结束全天教学<br/>
<img src="http://img.blog.csdn.net/20131105221524828" alt="教室标识" /></li>
<li>5点开始给参加培训的老师和义工颁发传知的证书<br/>
<img src="http://img.blog.csdn.net/20131105221653234" alt="上课的老师们" /></li>
<li>7点出发回庆阳市区

<h3>11月4号</h3></li>
<li>早上7点起床，吃早餐，
坐大巴回西安<br/>
<img src="http://img.blog.csdn.net/20131105220753390" alt="清晨的庆阳市" /></li>
<li>中午2点到达西安机场。</li>
<li>4点回到西安市区</li>
</ol>


<h2>感受关键字</h2>

<ol>
<li>关键字“累”，长时间做大巴车，从庆阳市到环县的路，因高速不通和大路上的桥坏了，只能走小路，当地是山区地形，不好走，一路有过山车的感觉。到了之后，时间比较紧张，工作行程安排的比较紧凑.</li>
<li>关键字“吃”，当地政府工作人员，安排了相对丰盛的工作餐（在城市改善生活下馆子的水平），但当知道环县中心小学教学楼里建了暖气片，却因没有锅炉，无法正常冬季供暖，学生们老师们冬天只能靠在教室生铁炉子。饭吃起来有压力，不过，大环境如此，也没法苛求。<br/>
<img src="http://img.blog.csdn.net/20131105221133562" alt="孩子们的教室" /><img src="http://img.blog.csdn.net/20131105221143078" alt="教室的煤堆" /></li>
<li>关键字“教”， 过来参与培训的是木钵镇中心小学的老师和周围山区小学的老师，老师中有不少年轻老师是上完大学从城市回去的，老师们都很好学，有很强的竞争意识。整个一天的培训中，多数老师很认真，到是我在硬件教学班，有些环节显得准备不足，捉襟见肘。</li>
<li>关键字“互联网” 老师们接触电脑的程度，比我预计要好，这也是互联网带来的改变，记得05年去榆中县里的山区时，当时感觉到当地很封闭，这次就没有那种感觉了，不少老师，会聊QQ、网购，个别还对苹果电脑很感兴趣。</li>
<li>关键字“传知”，传知公益基金是这次活动的发起者和组织者，把活动策划安排的很好，教材的准备，开始上课前的问卷调查，到上课后的课程反馈调查，以及授予证书与合影，都安排的很用心，去保证培训的效果。</li>
<li>关键字“收获”，很多宣传公益的，都会强调奉献、付出阿，其实除去休息时间的占用和钱，活动中会有很多收获，看了不一样的风景，见了不同的人，这可以当作是旅游；走上讲台去传播电脑知识，本身就是对自己能力的锻炼。活动结束，留下的这些回忆，非常美丽，它会给你不同的角度去看这个色彩斑斓的世界，不只是工作、房子。<br/>
<img src="http://img.blog.csdn.net/20131105221102437" alt="哈哈，证书" /><br/>
<a href="http://www.comp-on.org">传知网络</a><p class='post-footer'>
     原文链接:
     <a href='http://xunyanan.com/blog/2013/11/16/xin-huo-xiang-chuan/'><a href="http://xunyanan.com/blog/2013/11/16/xin-huo-xiang-chuan/">http://xunyanan.com/blog/2013/11/16/xin-huo-xiang-chuan/</a></a><br/>
     &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
     &nbsp;posted at <a href='http://xunyanan.com'><a href="http://xunyanan.com">http://xunyanan.com</a></a>
     </p></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[创建octopress博客]]></title>
    <link href="http://xunyanan.com/blog/2013/11/16/build-octopress-blog/"/>
    <updated>2013-11-16T15:24:00+08:00</updated>
    <id>http://xunyanan.com/blog/2013/11/16/build-octopress-blog</id>
    <content type="html"><![CDATA[<p>惯例，第一篇献给<a href="http://octopress.org/">octopress</a>,并感谢github创始人<a href="http://tom.preston-werner.com/">Tom Preston Werner</a>，没有他<a href="http://tom.preston-werner.com/2008/10/18/how-i-turned-down-300k.html">放弃30W美元的年薪</a>，便不会有github。</p>

<p>看到这篇文章，你已经访问到我的<a href="http://xunyanan.com">octopress博客</a>了（这不是废话么），如果有想法也创建一个独立的个人博客，可以参看我创建博客的一些经验。</p>

<p>我是站在巨人的肩头上完成<a href="http://xunyanan.com">博客</a>创建的,有:</p>

<p><em><a href="http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html">阮一峰的搭建一个免费的，无限流量的Blog&mdash;&mdash;github Pages和Jekyll入门</a><br/>
</em><a href="http://blog.devtang.com/blog/2012/02/10/setup-blog-based-on-github/">唐巧的象写程序一样写博客：搭建基于github的博客</a><br/>
*<a href="http://biaobiaoqi.me/blog/2013/03/21/building-octopress-in-github-mac/">biaobiaoqi的在github上
搭建octopress博客 Mac版</a></p>

<p>首先，你要有一台可以上网的电脑,（又是废话，正用着呢，<a href="http://www.comp-on.org">点这发现自己的幸运</a>）。然后了解你的电脑，要知道操作系统版本等(最好有用一种语言写过代码的经历)，博主用的是Mac电脑，windows和linux的同学不建议参考本文。</p>

<p>网上有很有搭环境的博文，但建议看<a href="http://octopress.org/docs/setup/">官网的步骤</a>，因为Octopress一直在更新，很多网上的博文都是旧版本的搭建步骤，耽误事。</p>

<!-- more -->


<h1>搭建环境</h1>

<h2>工欲善其事，必先利其器:</h2>

<ol>
<li>Github（官网下载，后面新建项目用）
下载地址：<a href="https://help.github.com/articles/set-up-git">https://help.github.com/articles/set-up-git</a></li>
<li>iTerm2（可替代mac终端的，比较强大）
下载地址：<a href="http://www.iterm2.com/#/section/home">http://www.iterm2.com/#/section/home</a></li>
<li>ruby 安装包 （下载 ruby-1.9.3-p362.tar.gz 这个）
下载地址：<a href="http://ruby.taobao.org/mirrors/ruby/">http://ruby.taobao.org/mirrors/ruby/</a></li>
<li>Mou （Markdown编辑软件，这个强，可用于后期发布博客文章）
下载地址：<a href="http://mouapp.com/">http://mouapp.com/</a></li>
<li>Xcode（它将帮你安装好 Unix 环境需要的开发包）
下载地址：官网或百度吧，比较大⋯⋯</li>
</ol>


<p>让子弹飞一会，这些都是后面要用到的工具软件，先去下载,不要安装。<br/>
这时候，忽略一个问题，就是每个人的Mac电脑是不一样的，最大的不同是操作系统版本，我的OS系统是Version 10.9，巨人们的写博客时，还没有出呢，可能你的Mac是更新的电脑，所以要想好如何check这些。</p>

<h2>想想我们要做什么</h2>

<p>看官网的步骤之前，需要有点大致的概念，这样能帮助更快的理解。</p>

<p>1 假设我们需要自己搭建一个独立博客网站，需要什么？首先要有台连接到英特网服务器，要有前端的页面，要后端的数据库，要有域名等。
2 github可以提供给我们的是，github一个免费的代码托管仓库，它支持用户html页面的显示，也就是用户可以上传HTML文件，然后在远程像访问网页一样访问它。
3 按照我们的设想1，我们这时候还缺网站的后台，数据库这些，github并不提供这些，数据库的作用是提高管理能力，对于个人博客这种数据规模很小，便可返璞归真，用回静态页面。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>对于计算机和一切能被用来改造这个世界的事物的使用都不应受到任何限制，
</span><span class='line'>任何试图隐藏系统的复杂性的行为都只会得到一个更为复杂的系统。</span></code></pre></td></tr></table></div></figure>


<p>4 静态页面用起来很复杂，我们需要Octopress这样的引擎来帮我们干“重活”，我们可以关注于自己博客中的内容，用过HTML的都知道，内容需要写<html></html>的标记，我们要把这些工作也简化，便有了Markdown，我们使用Markdown来描述我们的内容，然后由引擎“翻译”为HTML页面。</p>

<h2>现在需要什么环境</h2>

<ol>
<li>既然要托管到github，那么便要有github的环境.
check本机的git环境，在命令行输入</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git --version</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Octopress是基于Jekyll的，需要ruby的环境编译。
check ruby</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ruby -v</span></code></pre></td></tr></table></div></figure>


<p>ruby的version 1.9.3以上，新版的Mac，这些都是有装的。
3. gcc和make，ruby的环境需要gcc，这个我们通过安装xcode的command line tool来完成安装
check gcc</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gcc -v</span></code></pre></td></tr></table></div></figure>


<h2>跟着官方文档设置Octopress</h2>

<p>Setup Octopress</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>cd octopress</span></code></pre></td></tr></table></div></figure>


<p>Next, install dependencies.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install bundler
</span><span class='line'>rbenv rehash    # If you use rbenv, rehash to be able to run the bundle command
</span><span class='line'>bundle install</span></code></pre></td></tr></table></div></figure>


<p>Install the default Octopress theme.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake install</span></code></pre></td></tr></table></div></figure>


<h2>建立username.github.io的gibhub page</h2>

<p>看到这里，你应该在啃官方的文档，这个很重要，需要继续啃，里面的步骤我就不再翻译了。</p>

<p>这需要花费一些时间，因为全是新知识，不要怕放弃。</p>

<p>继续努力，直到在浏览器中，输入username.github.io，可以看到自己的页面</p>

<h1>个性化定制</h1>

<p>看到了自己的页面，是不是很兴奋，先别开香槟，接着还有任务。</p>

<h2>git相关的命令</h2>

<p>git是一个Linux开发的版本控制工具，它svn不同的是，它是分布式的，可以不用常联server。对于学习git，推荐的还是<a href="http://gitref.org">官方文档</a>,（<a href="http://gitbook.liuhui998.com/7_3.html">中文版</a>）。
还记得，安装Octopress的第一步操作么？</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/imathis/octopress.git octopress</span></code></pre></td></tr></table></div></figure>


<p>我们从github克隆了一份octopress的代码到本地。这时候相当于在本地有了一份octopess的代码库，使用</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git remote -v</span></code></pre></td></tr></table></div></figure>


<p>会看到远程代码仓库的配置信息</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>origin   git://github.com/imathis/octopress.git (fetch)
</span><span class='line'>origin    git://github.com/imathis/octopress.git (push)</span></code></pre></td></tr></table></div></figure>


<p>下面是一张我的octopress文件夹里的内容<br/>
<img src="http://xunyn.github.io/images/blog/OctopressCatogery.png" alt="OctopressCatogery" /><br/>
其中sass和source，这是我们博客的源代码文件目录。<br/>
我们需要把源代码也上传到github上，这样便可以多台机写博客了。<br/>
_deploy是通过octopress生成的静态页面的博客文件夹，我们可以看到它的里面也有.git的文件。<br/>
cd进到该目录，使用git remote -v查看</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>origin   http://github.com/xunyn/xunyn.github.io (fetch)
</span><span class='line'>origin    http://github.com/xunyn/xunyn.github.io (push)</span></code></pre></td></tr></table></div></figure>


<p>它会在我们使用rake deploy时自动push到我们的路径下。这时候我们不需要在自已去push。但是博客源代码是需要我们自己push到github的server的.</p>

<h4>使用多台电脑的同时写博客</h4>

<p>需要先拿把source code拿下来</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git pull origin source</span></code></pre></td></tr></table></div></figure>


<p>然后在更改了source后，check in更新，将本地source update github的代码仓库上</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git add .
</span><span class='line'>git commit -m 'your message'
</span><span class='line'>git push origin source</span></code></pre></td></tr></table></div></figure>


<h2>个性化设置自己的博客</h2>

<p>个性化设置这块，参考了<a href="http://biaobiaoqi.me/blog/2013/07/10/decorate-octopress/">biaobiaoqi的定制Octopress</a>,
*安装第三方主题</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd octopress$ git clone git://github.com/tommy351/Octopress-Theme-Slash.git .themes/slash$ rake install['slash’] </span></code></pre></td></tr></table></div></figure>


<p>*添加评论
Disqus</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Disqus Comments
</span><span class='line'>disqus_short_name:xunyngithubio
</span><span class='line'>disqus_show_comment_count:false</span></code></pre></td></tr></table></div></figure>


<p>*添加分享
注册加网后，从加网获得模板
在post下创建jiathis.html
将加网的模板，拷贝到jiathis.html
在_config.xml创建新的标记</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># share
</span><span class='line'>jiathis_share: ture
</span></code></pre></td></tr></table></div></figure>


<p>在source/_includes/post/sharing.html添加下面的代码。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>\#使用是去掉反斜杠掉反斜杠
</span><span class='line'>    \{\% if site.jiathis_share \%\}
</span><span class='line'>    \{\% include post/jiathis.html \%\}
</span><span class='line'>    \{\% endif \%\}</span></code></pre></td></tr></table></div></figure>


<h1>Q&amp;A</h1>

<p>1.Xcode 5 command line 未安装解决方法</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>xuns-MacBook-Pro:~ xunyanan$ xcode-select --install
</span><span class='line'>xcode-select: note: install requested for command line developer tools
</span><span class='line'>xuns-MacBook-Pro:~ xunyanan$ </span></code></pre></td></tr></table></div></figure>


<p>2.无权限问题解决方法
使用sudo
sudo gem install bundler
sudo bundle install</p>

<p>3.bundle install安装成功的log,这个需要网络访问，要等较长时间。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>xuns-MacBook-Pro:octopress1 xunyanan$ sudo bundle install
</span><span class='line'>Password:
</span><span class='line'>Fetching gem metadata from https://rubygems.org/.......
</span><span class='line'>Fetching gem metadata from https://rubygems.org/..
</span><span class='line'>Using rake (0.9.2.2)
</span><span class='line'>Using RedCloth (4.2.9)
</span><span class='line'>Using chunky_png (1.2.5)
</span><span class='line'>Using fast-stemmer (1.0.1)
</span><span class='line'>Using classifier (1.3.3)
</span><span class='line'>Using fssm (0.2.9)
</span><span class='line'>Using sass (3.2.9)
</span><span class='line'>Using compass (0.12.2)
</span><span class='line'>Installing directory_watcher (1.4.1)
</span><span class='line'>Installing haml (3.1.7)
</span><span class='line'>Installing kramdown (0.13.8)
</span><span class='line'>Installing liquid (2.3.0)
</span><span class='line'>Installing syntax (1.0.0)
</span><span class='line'>Installing maruku (0.6.1)
</span><span class='line'>Installing posix-spawn (0.3.6)
</span><span class='line'>Installing yajl-ruby (1.1.0)
</span><span class='line'>Installing pygments.rb (0.3.4)
</span><span class='line'>Installing jekyll (0.12.0)
</span><span class='line'>Installing rack (1.5.2)
</span><span class='line'>Installing rack-protection (1.5.0)
</span><span class='line'>Installing rb-fsevent (0.9.1)
</span><span class='line'>Installing rdiscount (2.0.7.3)
</span><span class='line'>Installing rubypants (0.2.0)
</span><span class='line'>Installing sass-globbing (1.0.0)
</span><span class='line'>Installing tilt (1.3.7)
</span><span class='line'>Installing sinatra (1.4.2)
</span><span class='line'>Installing stringex (1.4.0)
</span><span class='line'>Using bundler (1.3.5)
</span><span class='line'>Your bundle is complete!
</span><span class='line'>Use `bundle show [gemname]` to see where a bundled gem is installed. </span></code></pre></td></tr></table></div></figure>


<p>出现绿色的两行，说明安装成功。<br/>
4.git clone some branch</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git://github.com/xunyn/xunyn.github.io -b 'source' temp </span></code></pre></td></tr></table></div></figure>


<p>remember  brach name use ‘&#8217;</p>

<p>5.rake preview的使用
我的Mac机开启preview功能时，使用Chrome访问<a href="http://localhost:4000">localhost:4000</a>可以正常预览,使用Safari不行，具体原因还不知道。其次，preview支持页面改动预览，也就是可以边写边看效果，但开启preview功能前，一定要确保浏览器为占用4000的端口，否则会无法使用preview功能，好的方法是预览完，随手关闭页面。</p>

<p class='post-footer'>
        原文链接:
        <a href='http://xunyanan.com/blog/2013/11/16/build-octopress-blog/'>http://xunyanan.com/blog/2013/11/16/build-octopress-blog/</a><br/>
        &nbsp;written by <a href='http://xunyanan.com'>寻亚楠</a>
        &nbsp;posted at <a href='http://xunyanan.com'>http://xunyanan.com</a>
        </p>

]]></content>
  </entry>
  
</feed>
